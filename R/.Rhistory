data <- data.frame("url"= yacht, "Yacht Name"= name, "Price"= price)
data
data
data <- data.frame("url"= yacht, "Yacht Name"= name, "Price"= price)
yacht <- read_html('https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021') # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price <- price_yacht[2]
price
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price <- price_yacht[2]
name<- gsub('for sale','',name)
library(rvest)
library(xml2)
# web sceiping with "rvest" package
t <- read_html('https://www.boatinternational.com/yachts-for-sale') # read the html file
write_html(t,'boat.html')
t %>% html_nodes(".card__title--sponsored a") %>% html_text()
t %>%  html_nodes('.card_title--featured a') %>% html_attr('href')
# ---------------------------
url <- 'https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021'
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price <- price_yacht[2]
price
data <- data.frame("url"= yacht, "Yacht Name"= name, "Price"= price)
url <- 'https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021'
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price <- price_yacht[2]
price
data <- data.frame("url"= yacht, "Yacht Name"= name, "Price"= price)
data
url <-'https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021'
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
name<- gsub('for sale','',name)
url <-https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
url <-"https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021"
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price <- price_yacht[2]
price
data <- data.frame("url"= yacht, "Yacht Name"= name, "Price"= price)
data
name<- gsub('for sale','',name)
url <-"https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021"
yacht <- read_html(url) # 1 step: link the website
url <-"https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021"
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
name
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price <- price_yacht[2]
price
data <- data.frame("url"= yacht, "Yacht Name"= name, "Price"= price)
url
name
price
data
data <- data.frame("url"= url, "Yacht Name"= name, "Price"= price)
data
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
price_1 <- price_yacht[1]
price_2 <- price_yacht[2]
price_1
builtBy
builtBy <- price_yacht[1]
price <- price_yacht[2]
builtBy
price
data <- data.frame("url"= url, "Yacht Name"= name,"Built By"=builtBy "Price"= price)
data <- data.frame("url"= url, "Yacht Name"= name,"Built By"=builtBy ,"Price"= price)
data # my data is ready from the web
data <- data.frame("Yacht Name"= name,"Built By"=builtBy ,"Price"= price,"url"= url)
data # my data is ready from the web
first_function("https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021")
first_function("https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021")
first_function <- function(userUrl) {
#url <-"https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021"
yacht <- read_html(userUrl) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
name<- gsub('for sale','',name)
name
# price
price_yacht <- yacht %>% html_nodes(".stats__heading span") %>% html_text()
builtBy <- price_yacht[1]
price <- price_yacht[2]
builtBy
price
data <- data.frame("Yacht Name"= name,"Built By"=builtBy ,"Price"= price,"url"= url)
data # my data is ready from the web
}
first_function("https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021")
first_function("https://www.boatinternational.com/yachts-for-sale/emocean-rosetti-2021")
t <- read_html('https://www.boatinternational.com/yachts-for-sale') # read the html file
write_html(t,'boat.html')
t %>% html_nodes(".card__title--sponsored a") %>% html_text()
t %>%  html_nodes('.card_title--featured a') %>% html_attr('href')
t %>% html_nodes(".card__title--sponsored a") %>% html_attrs()
all_links <- paste0("https://www.boatinternational.com",t)
all_links
t %>% html_nodes(".card__title--sponsored a") %>% html_text()
all_links <-t %>% html_nodes(".card__title--sponsored a") %>% html_attr()
all_links <- paste0("https://www.boatinternational.com",t)
all_links
t %>% html_nodes(".card__title--sponsored a") %>% html_text()
all_links <-t %>% html_nodes(".card__title--sponsored a") %>% html_attr("href")
all_links <- paste0("https://www.boatinternational.com",t)
links <- paste0("https://www.boatinternational.com",t)
links
# t %>% html_nodes(".card__title--sponsored a") %>% html_text()
all <-t %>% html_nodes(".card__title--sponsored a") %>% html_attr("href")
links <- paste0("https://www.boatinternational.com",all)
links
for (item in links) {
first_function(item)
}
for (item in links) {
print(first_function(item))
}
data <- data.frame("Yacht Name"= name,"Built By"=builtBy ,"Price"= price,"url"= url)
data <- data.frame("Yacht Name"= name,"Built By"=builtBy ,"Price"= price,"url"= url)
data
for (item in links) {
data_set <-first_function(item)
data_set2 <- rbind(data_set2, data_set)
}
data <- rbind(data, data_set)
for (item in links) {
data_set <-first_function(item)
data <- rbind(data, data_set)
}
data_set2 <- data.frame()
data_set2 <- rbind(data, data_set)
for (item in links) {
data_set <-first_function(item)
data_set2 <- rbind(data, data_set)
}
links
links <- paste0("https://www.boatinternational.com",all)
# t %>% html_nodes(".card__title--sponsored a") %>% html_text().          # for adding all the data
all <-t %>% html_nodes(".card__title--sponsored a") %>% html_attr("href") # for reading only the links
t <- read_html('https://www.boatinternational.com/yachts-for-sale') # read the html file
# t %>% html_nodes(".card__title--sponsored a") %>% html_text().          # for adding all the data
all <-t %>% html_nodes(".card__title--sponsored a") %>% html_attr("href") # for reading only the links
links <- paste0("https://www.boatinternational.com",all)
links
data_set2 <- data.frame()
for (item in links) {
data_set <-first_function(item)
data_set2 <- rbind(data, data_set)
}
library(rvest)
library(xm12)
install.packages("xml2")
library(xm12)
install.packages("xml2")
library(xm12)
library(xml2)
url <- read_html("https://www.boatinternational.com/yachts-for-sale/fortitude-intermarine-usa-1998")
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
url <- "https://www.boatinternational.com/yachts-for-sale/fortitude-intermarine-usa-1998"
yacht <- read_html(url) # 1 step: link the website
# name
name <- yacht %>% html_nodes(".heading--large") %>% html_text()
details <- read_html(url) # 1 step: link the website
data_details <- list()
name <- details %>% html_nodes(".heading--large") %>% html_text()
name <- gsub('for sale','',name)
name <- details %>% html_nodes(".heading--large") %>% html_text()
details <- read_html(url) # 1 step: link the website
data_details <- list()
name <- details %>% html_nodes(".heading--large") %>% html_text()
details <- read_html(url) %>%  # 1 step: link the website
name <- details %>% html_nodes(".heading--large") %>% html_text()
name <- gsub('for sale','',name)
details <- read_html(url)  # 1 step: link the website
library(rvest)
library(xml2)
url <- "https://www.boatinternational.com/yachts-for-sale/fortitude-intermarine-usa-1998"
data_details <- list()
details <- read_html(url)  # 1 step: link the website
name <- details %>% html_nodes(".heading--large") %>% html_text()
name <- gsub('for sale','',name)
price <- details %>% html_nodes(".stats__heading span") %>% html_text()
builtBy <- price_yacht[1]
price <- details %>% html_nodes(".stats__heading span") %>% html_text()
builtBy <- price[1]
price <- price[2]
builtBy
price
data_details
# Add all the data in the list  --------
data_details <- list()
data_details [["name"]] <- name
data_details[["price"]]<- price
data_details[["builtBy"]] <-builtBy
data_details$name
library(rvest)
library(xml2)
library(data.table)
url <- read_html("https://www.yachtworld.co.uk/yacht/2003-luhrs-40-convertible-8631025/")
tax <- read_nodes(".datatable-title")
tax <- url %>%  html_nodes(".datatable-title")
# first step
url <- read_html("https://www.yachtworld.co.uk/yacht/2003-luhrs-40-convertible-8631025/")
tax <- url %>%  html_nodes(".datatable-title")
tax <- url %>%  html_nodes(".datatable-title")
url %>%  html_nodes(".datatable-title")
url %>%  html_nodes(".datatable-title") %>% html_text()
key <- url %>%  html_nodes(".datatable-title") %>% html_text()
value <- url %>%  html_nodes(".datatable-value") %>% html_text()
value
url %>% html_nodes(".payment-total") %>% html_text()
price <- url %>% html_nodes(".payment-total") %>% html_text()
name [["name"]] <- url %>% html_nodes(".heading") %>% html_text()
details[["price"]] <- url %>% html_nodes(".payment-total") %>% html_text()
details [["name"]] <- url %>% html_nodes(".heading") %>% html_text()
details[["price"]] <- url %>% html_nodes(".payment-total") %>% html_text()
details
details <- list()
details [["name"]] <- url %>% html_nodes(".heading") %>% html_text()
details[["price"]] <- url %>% html_nodes(".payment-total") %>% html_text()
details
for (item in details) {
print(details[[item]])
}
# contant
key <- url %>%  html_nodes(".datatable-title") %>% html_text()
key
value
print(i)
for (i in 1:lenght(key)) {
print(i)
}
for (i in 1:lenght(key)) {
print(i)
}
for (i in 1:length(key)) {
print(i)
}
for (i in 1:length(key)) {
print(i)
}
for (i in 1:length(key)) {
print(key[i])
}
for (i in 1:length(key)) {
paste0(key[i], value[i])
}
for (i in 1:length(key)) {
print(paste0(key[i], value[i]))
}
for (i in 1:length(key)) {
print(paste0(key[i]," ", value[i]))
}
for (i in 1:length(key)) {
print(paste0(key[i]," : ", value[i]))
}
for (i in 1:length(key)) {
print(paste0(key[i]," : ", value[i]))
details[[ key[i] ]] <- value[i]
}
details
get_yacht_word_ship(first_web)
get_yacht_word_ship <- function(t_url) {
url <- read_html(t_url)
# defined the list of the constant
details <- list()
details [["name"]] <- url %>% html_nodes(".heading") %>% html_text()
details[["price"]] <- url %>% html_nodes(".payment-total") %>% html_text()
# contant
key <- url %>%  html_nodes(".datatable-title") %>% html_text()
value <- url %>%  html_nodes(".datatable-value") %>% html_text()
if (length(key)==length(value)) {
for (i in 1:length(key)) {
print(paste0(key[i]," : ", value[i]))
details[[ key[i] ]] <- value[i]
}
}
return(details)
}
first_web <-"https://www.yachtworld.co.uk/yacht/2003-luhrs-40-convertible-8631025/"
get_yacht_word_ship(first_web)
for (item in list_of_yacht) {
df <- data.frame(get_yacht_word_ship(item))
}
for (item in list_of_yacht) {
df <- data.frame(get_yacht_word_ship(item))
print(df)
}
list_of_yacht <- c("https://www.yachtworld.co.uk/yacht/2005-nautor-swan-82--103-8741683/",
"https://www.yachtworld.co.uk/yacht/2020-bavaria-s36-open-8508362/",
"https://www.yachtworld.co.uk/yacht/2022-princess-y72-8535007/")
for (item in list_of_yacht) {
df <- data.frame(get_yacht_word_ship(item))
print(df)
}
df <- data.frame()
install.packages("plyr")
library(lpyr)
library(plyr)
all_df <- data.frame()
for (item in list_of_yacht) {
df <- data.frame(get_yacht_word_ship(item))
all_df <-rbind.fill(all_df, df)
}
View(all_df)
# adding the links to the functions
at2 <- function(x) {
x +2
}
lapply(1:10, at2)
# secound way
my_list <- lapply(list_of_yacht, get_yacht_word_ship)
View(my_list)
rbindlist(my_list)
ships<- rbindlist(my_list,fill = T)
View(ships)
t %>% html_nodes("a")
t<-read_html("https://www.yachtworld.co.uk/boats-for-sale/")
t %>% html_nodes("a")
t %>% html_nodes("a")html_attrs("href")
t<-read_html("https://www.yachtworld.co.uk/boats-for-sale/")
t %>% html_nodes("a")html_attrs("href")
t %>% html_nodes("a")html_attr("href")
t<-read_html("https://www.yachtworld.co.uk/boats-for-sale/")
t %>% html_nodes("a")html_attr("href")
t %>% html_nodes("a") %>% html_attr("href")
t %>% html_node("listings-container") %>% html_nodes("a") %>% html_attr("href")
t<-read_html("https://www.yachtworld.co.uk/boats-for-sale/")
t %>% html_node("listings-container") %>% html_nodes("a") %>% html_attr("href")
t<-read_html("https://www.yachtworld.co.uk/boats-for-sale/")
t %>% html_node(".listings-container") %>% html_nodes("a") %>% html_attr("href")
t<-read_html("https://www.yachtworld.co.uk/boats-for-sale/")
my_links <- t %>% html_node(".listings-container") %>% html_nodes("a") %>% html_attr("href")
my_list <- lapply(my_links, get_yacht_word_ship)
ships<- rbindlist(my_list,fill = T)
print(paste0("https://www.yachtworld.co.uk/boats-for-sale/?page=", i))
for (i in 2:10) {
print(paste0("https://www.yachtworld.co.uk/boats-for-sale/?page=", i))
}
View(t)
all_links
for (i in 2:5) { # in each loop we check one page
my_sec_links <- paste0("https://www.yachtworld.co.uk/boats-for-sale/?page=", i)
t<-read_html(my_sec_links)
my_links <- t %>% html_node(".listings-container") %>% html_nodes("a") %>% html_attr("href")
all_links <-c(all_links, my_links) # add to the empty vector each time in loop one more data from inner vector
}
all_links
# 1- all the ship auto maticly
all_links <-c() # create a vector of the link
for (i in 2:5) { # in each loop we check one page
my_sec_links <- paste0("https://www.yachtworld.co.uk/boats-for-sale/?page=", i)
t<-read_html(my_sec_links)
my_links <- t %>% html_node(".listings-container") %>% html_nodes("a") %>% html_attr("href")
all_links <-c(all_links, my_links) # add to the empty vector each time in loop one more data from inner vector
}
all_links
my_new_list <- lapply(all_links, get_yacht_word_ship)
new_data_set<- rbindlist(my_new_list,fill = T)
View(new_data_set)
library(jsonlite)
library(jsonlite)
library(jsonlite)
# read the menu.json file
t <-fromJSON('menu.json')
t$menu$popup$menuitem$value[3]
library(jsonlite)
# read the menu.json file
t <- fromJSON('menu.json')
t$menu$popup$menuitem$value[3]
readWebApp <- fromJSON('webApp.json')
readWebApp <- fromJSON('webApp.json')
readWebApp <- fromJSON('webApp.json')
readWebApp <- fromJSON('webApp.json')
# read the menu.json file
t <- fromJSON('menu.json')
readWebApp <- fromJSON('webApp.json')
setwd("~/greenFox/CEU-Traning/R/week_10")
readWebApp <- fromJSON('webApp.json')
# read the menu.json file
t <- fromJSON('menu.json')
readWebApp$`web-app`$servlet[5]
# read the menu.json file
t <- fromJSON('menu.json')
t$menu$popup$menuitem$value[3]
readWebApp <- fromJSON('webApp.json')
readWebApp$`web-app`$servlet[5]
readWebApp$`web-app`$servlet[5]
readWebApp$`web-app`$servlet[[5]]$`sevlet-name`
readWebApp
readWebApp$`web-app`$servlet[[5]]
readWebApp$`web-app`$servlet[[5]]
readWebApp$`web-app`$servlet[[5]]
readWebApp$`web-app`$servlet[[5]]
readWebApp <- fromJSON('webApp.json')
readWebApp$`web-app`$servlet[[5]]$`sevlet-name`
readWebApp$`web-app`$servlet[[5]]
library(jsonlite)
readHelp <- fromJSON('menu.json')
readHelp <- fromJSON('help.json')
library(jsonlite)
readHelp <- fromJSON('help.json')
readHelp$menu$items$id
readAsList <- read_json('help.json')
readAsList$menu$items
readAsList$menu$items[[21]]
readAsList$menu$items[[21]]$id
readAsList$menu$items[[21]]$id[1]
readAsList$menu$items[[21]]
readAsList$menu$items[[21]]$id
data <- fromJSON(url)
data <- fromJSON(url)
data <- fromJSON('https://api.exchangerate.host/latest')
library(jsonlite)
library(jsonlite)
data <- fromJSON('https://api.exchangerate.host/latest')
data$rates$HUF
# Dollar to Euro
data$rates$USD
convert <- fromJSON('https://api.exchangerate.host/convert?from=USD&to=huf')
convert$query$from=euro&to=huf
# convert the Cureency form the API
convert <- fromJSON('https://api.exchangerate.host/convert?from=USD&to=huf')
convert$query$from=euro&to=Huf
convert$query$from
print(convert)
compare <- fromJSON('https://api.exchangerate.host/timeseries?start_date=2020-01-01&end_date=2020-01-04&base=USD&symbol=HUF'
)
# from Euro to HUf
convert_Euro <- fromJSON('https://api.exchangerate.host/convert?from=EUR&to=huf')
print(convert_Euro)
print(convert_Dollar)
# from Dollar to HUf
convert_Dollar <- fromJSON('https://api.exchangerate.host/convert?from=USD&to=huf')
print(convert_Dollar)
# from Euro to HUf
convert_Euro <- fromJSON('https://api.exchangerate.host/convert?from=EUR&to=huf')
print(convert_Euro)
print(convert_Dollar)
print(convert_Euro)
library(data.table)
t<- fromJSON('https://api.exchangerate.host/timeseries?start_date=2022-01-01&end_date=2022-03-04&base=USD&symbols=HUF')
df <- rbindlist(t$rates)
df$date  <- names(t$rates)
df$date  <- as.Date(df$date)
library(ggplot2)
ggplot(df, aes(x=date, y=HUF))+
geom_line()
View(df)
setwd("/Users/JM/greenFox/CEU-Traning/R")
library(rvest)
t <- read_html('https://www.yachtworld.co.uk/yacht/1989-palmer-johnson-motorsailer-8587552/')
# read the table
t %>% html_table()
library(rvest)
library(data.table)
library(jsonlite)
library(httr)
library(tidyverse)
t <- read_html('https://www.payscale.com/research/US/Job=Product_Manager%2C_Software/Salary')
td  <- fromJSON(t %>%
html_nodes(xpath = "//script[@type='application/json']")%>%
html_text()
)
td
td
View(td)
View(td)
# convert to the string back
toJSON(td)
# convert a json  to the string back
toJSON(td,auto_unbox = T)
l
# convert a json  to the string back
toJSON(td,auto_unbox = T)
td$props$pageProps$pageData$byDimension$`Job by Employer`$rows$name[41]
td$props$pageProps$pageData$byDimension$`Job by Employer`$rows$range
